---
layout: mypost
title: 抱脸 Docker 部署笔记
date: 2025-10-03
published: False
categories: 自部署
tags: 
 - Docker
 - Huggingface
---

抱脸的 docker 环境仅能以非 root 用户权限运行，当基础镜像使用 root 权限会报 permission 错误，解决办法是新建一个普通用户

## Debian/Ubuntu-based Image

```dockerfile
FROM xxx/xxx:latest

RUN useradd -m -u 1000 -s /bin/bash guser && \
    chown -R guser:guser /app && \
    chmod -R 755 /app

WORKDIR /app

USER guser

ENV PORT=7860

EXPOSE 7860
```

## Alpine-based Image

```dockerfile
FROM xxx/xxx:latest

RUN useradd -m -u 1000 -s /bin/bash wuser && \
    chown -R wuser:wuser /app && \
    chmod -R 755 /app

WORKDIR /app

USER wuser

ENV PORT=7860

EXPOSE 7860
```

